<!DOCTYPE html>
<html lang="zh-tw" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='èªªæ˜DOMçš„ä¸€äº›é€²éšçŸ¥è­˜ï¼ŒDOMçš„æ¶æ§‹çµ„æˆã€å¦‚ä½•èª¿æ•´å…ƒç´ ã€æ¨£å¼ã€å±¬æ€§ï¼Œä»¥åŠå¦‚ä½•è¨­ç½®é©åˆçš„äº‹ä»¶ç²å–å¿…è¦çš„è³‡è¨Šä¾†åšå‡ºæœŸæœ›çš„è¦–è¦ºæ•ˆæœ'><h1><title>é€²éšJavaScript DOM çŸ¥è­˜ï½œbacnoteså‚™ä»½ç­†è¨˜</title></h1>

<link rel='canonical' href='https://bacnotes.github.io/p/advanced-javascript-dom/'>

<link rel="stylesheet" href="/scss/style.min.30d783ffd09b63aac959d5dfe5cafebfa1e5b6861b28226ac3b05c7210fcc0bf.css"><meta property='og:title' content='é€²éšJavaScript DOM çŸ¥è­˜ï½œbacnoteså‚™ä»½ç­†è¨˜'>
<meta property='og:description' content='èªªæ˜DOMçš„ä¸€äº›é€²éšçŸ¥è­˜ï¼ŒDOMçš„æ¶æ§‹çµ„æˆã€å¦‚ä½•èª¿æ•´å…ƒç´ ã€æ¨£å¼ã€å±¬æ€§ï¼Œä»¥åŠå¦‚ä½•è¨­ç½®é©åˆçš„äº‹ä»¶ç²å–å¿…è¦çš„è³‡è¨Šä¾†åšå‡ºæœŸæœ›çš„è¦–è¦ºæ•ˆæœ'>
<meta property='og:url' content='https://bacnotes.github.io/p/advanced-javascript-dom/'>
<meta property='og:site_name' content='bacnoteså‚™ä»½ç­†è¨˜'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='JavaScript' /><meta property='article:published_time' content='2022-04-01T00:00:00&#43;08:00'/><meta property='article:modified_time' content='2022-04-01T00:00:00&#43;08:00'/><meta property='og:image' content='https://bacnotes.github.io/p/advanced-javascript-dom/pexels-na-urchin-2377173.jpg' />
<meta name="twitter:site" content="@bacnotes">
    <meta name="twitter:creator" content="@bacnotes"><meta name="twitter:title" content="é€²éšJavaScript DOM çŸ¥è­˜ï½œbacnoteså‚™ä»½ç­†è¨˜">
<meta name="twitter:description" content="èªªæ˜DOMçš„ä¸€äº›é€²éšçŸ¥è­˜ï¼ŒDOMçš„æ¶æ§‹çµ„æˆã€å¦‚ä½•èª¿æ•´å…ƒç´ ã€æ¨£å¼ã€å±¬æ€§ï¼Œä»¥åŠå¦‚ä½•è¨­ç½®é©åˆçš„äº‹ä»¶ç²å–å¿…è¦çš„è³‡è¨Šä¾†åšå‡ºæœŸæœ›çš„è¦–è¦ºæ•ˆæœ"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://bacnotes.github.io/p/advanced-javascript-dom/pexels-na-urchin-2377173.jpg' />
    <link rel="shortcut icon" href="favicon.ico" />

<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y4R93LRYFV"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-Y4R93LRYFV', { 'anonymize_ip': false });
}
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6750742665415100"
     crossorigin="anonymous"></script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ›é¸å–®">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/julia-caesar-asct7UP3YDE-unsplash_hu296d2c295a04a461664de06126b5c2e0_498703_300x0_resize_q75_box.jpg" width="300"
                            height="200" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸŒŸ</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <p class="site-name"><a href="/">bacnoteså‚™ä»½ç­†è¨˜</a></p>
            <p class="site-description">è¨˜éŒ„å°å°Juniorçš„å­¸ç¿’éç¨‹</p>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/bacnotes'
                        target="_blank"
                        title="GitHub"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com/bacnotes'
                        target="_blank"
                        title="Twitter"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>å¤œæ™šæ¨¡å¼</span>
                </li>
            
        </div>
    </ol>
</aside>
<main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/advanced-javascript-dom/">
                <img src="/p/advanced-javascript-dom/pexels-na-urchin-2377173_hu3d03a01dcc18bc5be0e67db3d8d209a6_1054351_800x0_resize_q75_box.jpg"
                        srcset="/p/advanced-javascript-dom/pexels-na-urchin-2377173_hu3d03a01dcc18bc5be0e67db3d8d209a6_1054351_800x0_resize_q75_box.jpg 800w, /p/advanced-javascript-dom/pexels-na-urchin-2377173_hu3d03a01dcc18bc5be0e67db3d8d209a6_1054351_1600x0_resize_q75_box.jpg 1600w"
                        width="800" 
                        height="527" 
                        loading="lazy"
                        alt="Featured image of post é€²éšJavaScript DOM çŸ¥è­˜ï½œbacnoteså‚™ä»½ç­†è¨˜" />
                
            </a>
        </div>
    

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <p class="article-title">
            <a href="/p/advanced-javascript-dom/">é€²éšJavaScript DOM çŸ¥è­˜ï½œbacnoteså‚™ä»½ç­†è¨˜</a>
        </p>
    
        
        <p class="article-subtitle">
            èªªæ˜DOMçš„ä¸€äº›é€²éšçŸ¥è­˜ï¼ŒDOMçš„æ¶æ§‹çµ„æˆã€å¦‚ä½•èª¿æ•´å…ƒç´ ã€æ¨£å¼ã€å±¬æ€§ï¼Œä»¥åŠå¦‚ä½•è¨­ç½®é©åˆçš„äº‹ä»¶ç²å–å¿…è¦çš„è³‡è¨Šä¾†åšå‡ºæœŸæœ›çš„è¦–è¦ºæ•ˆæœ
        </p>
        
    </div>

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Apr 01, 2022</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é–±è®€æ™‚é–“: 10 åˆ†é˜
                </time>
            </div>
        
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <p>è‹¥æ²’æœ‰æ“ä½œé DOM å¯ä»¥å…ˆé–±è®€ <a class="link" href="https://bacnotes.github.io/p/javascript-dom-manipulation/"  target="_blank" rel="noopener"
    >DOM æ“ä½œåŸºç¤çŸ¥è­˜è¤‡ç¿’</a></p>
<p><img src="/p/advanced-javascript-dom/dom.png"
	width="1151"
	height="571"
	srcset="/p/advanced-javascript-dom/dom_hu79a7f18fe9546d847777467d3087d71f_224898_480x0_resize_box_3.png 480w, /p/advanced-javascript-dom/dom_hu79a7f18fe9546d847777467d3087d71f_224898_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="483px"
	
></p>
<h2 id="node-ç¯€é»">Node ç¯€é»</h2>
<ul>
<li>æ¯ä¸€å€‹ Dom tree çš„å…ƒç´ éƒ½æ˜¯ä¸€å€‹ Node</li>
<li>æ‰€æœ‰ HTML å…ƒç´ å¯ä»¥é€éç¹¼æ‰¿å–å¾—çˆ¶ç¯€é»æ–¹æ³•(.addEventListener(), .cloneNode(), closet())</li>
<li>:root åŒ documentElement åŒ html</li>
</ul>
<h3 id="å±¬æ€§">å±¬æ€§</h3>
<ul>
<li>node.textContent è¡¨ç¤ºæ­¤ç¯€é»æˆ–å…¶å¾Œä»£çš„æ–‡å­—å…§å®¹</li>
<li>node.childNodes æ­¤ç¯€é»çš„æ‰€æœ‰å­ç¯€é»</li>
<li>node.parentNode è¡¨ç¤ºæ­¤ç¯€é»çš„çˆ¶ç¯€é»</li>
</ul>
<h3 id="æ–¹æ³•">æ–¹æ³•</h3>
<ul>
<li>node.cloneNode() å›å‚³å‘¼å«æ­¤æ–¹æ³•ä¹‹ç¯€é»ç‰©ä»¶çš„æ‹·è²</li>
</ul>
<h3 id="4-ç¨®é¡å‹">4 ç¨®é¡å‹</h3>
<ol>
<li>element: <!-- raw HTML omitted --> <!-- raw HTML omitted -->å¯ä»¥ä½¿ç”¨.querySelector(), .classList() ç­‰æ–¹æ³•</li>
<li>text: å…ƒç´ è£¡é¢çš„æ–‡å­—</li>
<li>comment: <!-- raw HTML omitted --></li>
<li>document: querySelector(), .createElement()</li>
<li>event target æ˜¯æ‰€æœ‰ç¯€é»çš„ parent nodeï¼Œä¸‹é¢æœ‰ä¸€å€‹ window nodeï¼Œè®“ä¸åŒé¡å‹çš„ nodeï¼ŒåŒ…å« element è·Ÿ document éƒ½å¯ä»¥ç›£è½äº‹ä»¶</li>
</ol>
<ul>
<li>element è·Ÿ document éƒ½å¯ä»¥ä½¿ç”¨.querySelector()</li>
</ul>
<h2 id="å…ƒç´ ">å…ƒç´ </h2>
<h3 id="é¸å–å…ƒç´ ">é¸å–å…ƒç´ </h3>
<ul>
<li>
<p>ç¾ä»£ é¸å–å–®å€‹å…ƒç´  document.querySelector(selector)</p>
</li>
<li>
<p>ç¾ä»£ é¸å–å¤šå€‹å…ƒç´  document.querySelectorAll(selector)</p>
</li>
<li>
<p>æ—©æœŸ é¸å–å–®å€‹å…ƒç´  document.getElementById(id)</p>
</li>
<li>
<p>æ—©æœŸ é¸å–å¤šå€‹å…ƒç´  document.getElementsByTagName(tagName)</p>
</li>
<li>
<p>æ—©æœŸ é¸å–å¤šå€‹å…ƒç´  document.getElementsByClassName(name)</p>
</li>
<li>
<p>é¸å–å…ƒç´ å…§çš„ HTML çµæ§‹ element.innerHTML</p>
</li>
<li>
<p>é¸å–å…ƒç´ å…§çš„å¯è¦‹æ–‡å­— element.innerText</p>
</li>
<li>
<p>é¸å–å…ƒç´ å…§çš„æ‰€æœ‰æ–‡å­—(åŒ…å«ç©ºç™½) element.textContent</p>
</li>
</ul>
<h3 id="å‰µé€ èˆ‡æ’å…¥å…ƒç´ ">å‰µé€ èˆ‡æ’å…¥å…ƒç´ </h3>
<ul>
<li>å‰µé€ èˆ‡æ’å…¥å…ƒç´  element.insertAdjacentHTML(positionName, htmlText)</li>
<li>positionName åŒ…å«ï¼š
<ul>
<li>&lsquo;beforebegin&rsquo;: åœ¨ element ä¹‹å‰</li>
<li>&lsquo;afterbegin&rsquo;: åœ¨ element è£¡é¢ï¼Œç¬¬ä¸€å€‹å­å…ƒç´ ä¹‹å‰</li>
<li>&lsquo;beforeend&rsquo;: åœ¨ element è£¡é¢ï¼Œæœ€å¾Œä¸€å€‹å­å…ƒç´ ä¹‹å¾Œ</li>
<li>&lsquo;afterend&rsquo;: åœ¨ element ä¹‹å¾Œ</li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">ul</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;list&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>CSS<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    // will add here
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">list</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#list&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">list</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="s1">&#39;afterbegin&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;li&gt;HTML&lt;/li&gt;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å‰µé€ å…ƒç´  document.createElement(&lsquo;å…ƒç´ é¡å‹&rsquo;)</li>
<li>æ’å…¥å…ƒç´ åœ¨ element è£¡é¢ç¬¬ä¸€å€‹ element.prepend(å…ƒç´ )</li>
<li>æ’å…¥å…ƒç´ åœ¨ element è£¡é¢æœ€å°¾å·´ element.append(å…ƒç´ )</li>
<li>æ’å…¥å…ƒç´ å¹³è¡Œ element å‰é¢ element.before(å…ƒç´ )</li>
<li>æ’å…¥å…ƒç´ å¹³è¡Œ element å¾Œé¢ element.after(å…ƒç´ )</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">header</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.header&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">message</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">message</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;cookie-message&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">message</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="sb">`we use cookie for ... and .... &lt;button class=&#34;btn btn--close-cookie&#34;&gt;Got it&lt;/button&gt; 
</span></span></span><span class="line"><span class="cl"><span class="sb">	`</span>
</span></span><span class="line"><span class="cl"><span class="nx">header</span><span class="p">.</span><span class="nx">prepend</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">header</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// è‹¥å…ˆprependå¾Œappendåªæœƒæœ‰ä¸€å€‹å­˜åœ¨ï¼Œå› ç‚ºæŒ‡ç¨±çš„å…ƒç´ æ˜¯å”¯ä¸€çš„ï¼Œå¸Œæœ›ä¸Šä¸‹éƒ½æœ‰æ–°å¢éœ€è¦ç”¨cloneçš„æ–¹å¼ï¼Œtrueä»£è¡¨å­ç¯€é»éƒ½æœ‰copy
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">header</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="kc">true</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">header</span><span class="p">.</span><span class="nx">before</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">header</span><span class="p">.</span><span class="nx">after</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="åˆªé™¤å…ƒç´ ">åˆªé™¤å…ƒç´ </h3>
<ul>
<li>åˆªé™¤å…ƒç´  element.remove()</li>
<li>åˆªé™¤ç¯€é»ä¸‹å­å…ƒç´  node.removeChild()</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.btn--close-cookie&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// message.remove()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">message</span><span class="p">.</span><span class="nx">parentElement</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="class-æ¨£å¼">class æ¨£å¼</h2>
<h3 id="å–å¾—-class-æ¨£å¼">å–å¾— class æ¨£å¼</h3>
<ul>
<li>å…ƒç´ .style.å±¬æ€§å</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span> <span class="c1">// rgb(55, 55, 55)
</span></span></span><span class="line"><span class="cl"><span class="c1">// ç„¡æ³•å–å¾—æ²’æœ‰å®šç¾©ï¼Œè¢«éš±è—ï¼Œæˆ–ä¸å­˜åœ¨æ–¼classè£¡é¢çš„å±¬æ€§
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span> <span class="c1">//
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>getComputedStyle(å…ƒç´ ).å±¬æ€§</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">message</span><span class="p">).</span><span class="nx">color</span><span class="p">)</span> <span class="c1">// rgb(187, 187, 187)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">message</span><span class="p">).</span><span class="nx">height</span><span class="p">)</span> <span class="c1">// 43.55px
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">message</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">  <span class="nb">Number</span><span class="p">.</span><span class="nb">parseFloat</span><span class="p">(</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">message</span><span class="p">).</span><span class="nx">height</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="mi">30</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ–°å¢åˆ‡æ›åˆªé™¤ç¢ºèªæ˜¯å¦æœ‰æ¨£å¼">æ–°å¢/åˆ‡æ›/åˆªé™¤/ç¢ºèªæ˜¯å¦æœ‰æ¨£å¼</h3>
<ul>
<li>element.classList.add(&lsquo;hidden&rsquo;)</li>
<li>element.classList.toggle(&lsquo;hidden&rsquo;)</li>
<li>element.classList.remove(&lsquo;hidden&rsquo;)</li>
<li>element.classList.contains(&lsquo;hidden&rsquo;)</li>
</ul>
<h3 id="è¨­ç½®-css-æ¨£å¼">è¨­ç½® CSS æ¨£å¼</h3>
<ul>
<li>style.setProperty(propertyName, value, priority)</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// rootå…ƒç´ è¨­ç½®é¡è‰²æ¨£å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">setProperty</span><span class="p">(</span><span class="s1">&#39;--color-primary&#39;</span><span class="p">,</span> <span class="s1">&#39;orangered&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å±¬æ€§-1">å±¬æ€§</h2>
<h3 id="å–å¾—å±¬æ€§">å–å¾—å±¬æ€§</h3>
<ul>
<li>element.getAttribute(attributeName)</li>
<li>æœƒå›å‚³è©²ç¶²é å…ƒç´ çš„å±¬æ€§ã€‚ å¦‚æœè©²å±¬æ€§ä¸å­˜åœ¨ï¼Œå…¶å›å‚³å€¼æœƒæ˜¯ null æˆ– &quot;&quot;</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">logo</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;nav__logo&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// htmlåªæœ‰å®šç¾© src alt class designerç­‰å±¬æ€§
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// not standard attribute ç„¡æ³•ç›´æ¥dot notationå–å¾—
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">logo</span><span class="p">.</span><span class="nx">designer</span><span class="p">)</span> <span class="c1">// undefined
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// å¯å–å¾—æ¨™æº– / éæ¨™æº–çš„å±¬æ€§
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">logo</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;designer&#39;</span><span class="p">))</span> <span class="c1">// Jonas
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">logo</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">))</span> <span class="c1">// img/logo.png ç›¸å°
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ–°å¢åˆ‡æ›åˆªé™¤ç¢ºèª-å±¬æ€§å›å‚³å±¬æ€§å€¼">æ–°å¢/åˆ‡æ›/åˆªé™¤/ç¢ºèª å±¬æ€§/å›å‚³å±¬æ€§å€¼</h3>
<ul>
<li>element.setAttribute(name, value)</li>
<li>element.toggleAttribute(name)</li>
<li>element.removeAttribute(name)</li>
<li>element.hasAttribute(name)</li>
<li>element.getAttribute(name)</li>
</ul>
<h3 id="å¢åŠ -data-å±¬æ€§">å¢åŠ  <code>data-*</code>å±¬æ€§</h3>
<ul>
<li>html è£¡é¢æ”¾ <code>data-*</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="nx">img</span> <span class="nx">data</span><span class="o">-</span><span class="nx">version</span><span class="o">-</span><span class="nx">num</span><span class="o">=</span><span class="s2">&#34;3&#34;</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&#34;/img/logo.png&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">logo</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">logo</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">versionNum</span><span class="p">)</span> <span class="c1">// 3
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ç•«é¢å…ƒç´ å±¬æ€§">ç•«é¢å…ƒç´ å±¬æ€§</h2>
<h3 id="å…ƒç´ å¯¬é«˜">å…ƒç´ å¯¬é«˜</h3>
<p><img src="/p/advanced-javascript-dom/metric-all.svg"
	
	
	
	loading="lazy"
	
	
></p>
<ul>
<li>scrollWidth/scrollHeight(å« overflow éƒ¨åˆ†)</li>
<li>offsetWidth/offsetHeight(å« border/scroll)</li>
<li>clientWidth/clientHeight(ä¸å« border/scroll)</li>
<li>scrollTop(clientHeight è·Ÿ scrollHeight çš„å·®è·)</li>
</ul>
<h3 id="å…ƒç´ ç›¸å°æ–¼è¦–çª—çš„ä½ç½®">å…ƒç´ ç›¸å°æ–¼è¦–çª—çš„ä½ç½®</h3>
<ul>
<li>element.getBoundingClientRect()</li>
<li>æœƒå›å‚³ä¸€å€‹ DOMRect ç‰©ä»¶ï¼ŒåŒ…å«
<ul>
<li>x/left:å…ƒç´ å·¦ä¸Šè§’ x åº§æ¨™</li>
<li>y/top:å…ƒç´ å·¦ä¸Šè§’ y åº§æ¨™</li>
<li>width: å¯¬åº¦</li>
<li>height: é«˜åº¦</li>
<li>right:å…ƒç´ å³ä¸Šè§’ x åº§æ¨™</li>
<li>bottom:å…ƒç´ å³ä¸Šè§’ y åº§æ¨™</li>
</ul>
</li>
</ul>
<ul>
<li>IE è·Ÿ Edge æ²’æœ‰ x è·Ÿ y å±¬æ€§ï¼Œä½†æœ‰ left è·Ÿ topï¼Œè¶…å‡ºè¦–çª—ç¯„åœæ™‚ï¼Œæ•¸å€¼å°±æœƒè®Šè² </li>
</ul>
<h3 id="è¦–çª—æ°´å¹³å‚ç›´æ»¾å‹•ä½ç½®">è¦–çª—æ°´å¹³/å‚ç›´æ»¾å‹•ä½ç½®</h3>
<ul>
<li>window.pageXOffset, window.pageYOffset</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">btnScrollTo</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.btn--scroll-to&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">section1</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#section--1&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">btnScrollTo</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">s1coords</span> <span class="o">=</span> <span class="nx">section1</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">s1coords</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// DOMRect{ &#34;x&#34;: 0,&#34;y&#34;: 169.0908966064453 &#34;width&#34;: 411.81817626953125,&#34;height&#34;: 2953.29541015625,&#34;top&#34;: 169.0908966064453,&#34;right&#34;: 411.81817626953125,&#34;bottom&#34;: 3122.3863067626953,&#34;left&#34;: 0 }
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;current scroll(x/y)&#39;</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">pageXOffset</span><span class="p">,</span> <span class="nx">pageYOffset</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// current scroll(x/y) 0 0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;height/width viewport&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientWidth</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ»¾å‹•åˆ°æŒ‡å®šå…ƒç´ -scrollintoview">æ»¾å‹•åˆ°æŒ‡å®šå…ƒç´  scrollIntoView</h3>
<p>æœƒæ»¾å‹•å…ƒç´ çš„çˆ¶å®¹å™¨ï¼Œè®“è¢«èª¿ç”¨ scrollIntoView()çš„å…ƒç´ å¯ä»¥è¢«ä½¿ç”¨è€…å¯ä»¥çœ‹åˆ°ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">btnScrollTo</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.btn--scroll-to&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">section1</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#section--1&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">btnScrollTo</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">s1coords</span> <span class="o">=</span> <span class="nx">section1</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">s1coords</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// DOMRect{ &#34;x&#34;: 0,&#34;y&#34;: 169.0908966064453 &#34;width&#34;: 411.81817626953125,&#34;height&#34;: 2953.29541015625,&#34;top&#34;: 169.0908966064453,&#34;right&#34;: 411.81817626953125,&#34;bottom&#34;: 3122.3863067626953,&#34;left&#34;: 0 }
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;current scroll(x/y)&#39;</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">pageXOffset</span><span class="p">,</span> <span class="nx">pageYOffset</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// current scroll(x/y) 0 0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;height/width viewport&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientWidth</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// old scroll method: current position+ current scroll
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// window.scrollTo({
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//   left: s1coords.left + window.pageXOffset,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//   top: s1coords.top + window.pageYOffset,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">//   behavior: &#39;smooth&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// })
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="nx">section1</span><span class="p">.</span><span class="nx">scrollIntoView</span><span class="p">({</span> <span class="nx">behavior</span><span class="o">:</span> <span class="s1">&#39;smooth&#39;</span> <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="äº‹ä»¶é¡å‹è·Ÿäº‹ä»¶è™•ç†å™¨">äº‹ä»¶é¡å‹è·Ÿäº‹ä»¶è™•ç†å™¨</h2>
<ul>
<li>event.currentTarget æŒ‡å‘äº‹ä»¶ç»‘å®šçš„å…ƒç´ </li>
<li>event.target æŒ‡å‘äº‹ä»¶è§¸ç™¼çš„å…ƒç´ </li>
</ul>
<h3 id="é˜»æª”é è¨­äº‹ä»¶">é˜»æª”é è¨­äº‹ä»¶</h3>
<ul>
<li>e.preventDefault()</li>
<li>a é€£çµè·³è½‰ï¼Œè‹¥ç‚ºé é¢æœƒè‡ªå‹•è·³è½‰åˆ°æŒ‡å®šé é¢ï¼Œè‹¥ç‚ºéŒ¨é»#(a href=&quot;#&quot;)ï¼Œç€è¦½å™¨æ»‘å‹•åˆ°æœ€ä¸Šæ–¹</li>
<li>submit é»æ“Šæœƒé€å‡ºè³‡æ–™ä¸”åˆ·æ–°ç•«é¢</li>
</ul>
<h3 id="è¨­ç½®æˆ–ç§»é™¤ç›£è½">è¨­ç½®æˆ–ç§»é™¤ç›£è½</h3>
<ul>
<li>eventTarget.addEventListener(type, listener, useCapture)</li>
<li>eventTarget.removeEventListener(type, listener, useCapture)</li>
<li>ç¬¬ä¸€å€‹åƒæ•¸ç‚ºäº‹ä»¶ï¼Œç¬¬äºŒå€‹ç‚ºåŸ·è¡Œ{}å…§å®¹ï¼Œç¬¬ä¸‰å€‹æ˜¯å¦æ•æ‰å†’æ³¡äº‹ä»¶</li>
<li>ç¬¬ä¸‰å€‹åƒæ•¸æ²’æœ‰è¨­å®šæ™‚é è¨­ç‚º false ç›£è½å†’æ³¡äº‹ä»¶ï¼Œè¨­å®šç‚º true ç›£è½æ•æ‰äº‹ä»¶</li>
</ul>
<p><img src="/p/advanced-javascript-dom/bubble.png"
	width="886"
	height="433"
	srcset="/p/advanced-javascript-dom/bubble_hud943c0eb92f830bd5c835003f55b5b1f_124923_480x0_resize_box_3.png 480w, /p/advanced-javascript-dom/bubble_hud943c0eb92f830bd5c835003f55b5b1f_124923_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="204"
		data-flex-basis="491px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">h1</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;h1&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">printHi</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Hi&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">h1</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mouseenter&#39;</span><span class="p">,</span> <span class="nx">printHi</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 3ç§’å¾Œç§»é™¤ç›£è½ ä¾¿ç„¡æ³•å†è§¸ç™¼äº‹ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="nx">h1</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;mouseenter&#39;</span><span class="p">,</span> <span class="nx">alertH1</span><span class="p">,</span> <span class="mi">3000</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="äº‹ä»¶æ•ç²èˆ‡äº‹ä»¶å†’æ³¡">äº‹ä»¶æ•ç²èˆ‡äº‹ä»¶å†’æ³¡</h2>
<ul>
<li>é»æ“Šç›®æ¨™å…ƒç´ è§¸ç™¼äº‹ä»¶æ™‚ï¼Œè‹¥å…ƒç´ çˆ¶å±¤ä¹Ÿæœ‰è¨»å†Š click äº‹ä»¶ï¼Œå†’æ³¡éšæ®µæ™‚ä¹Ÿæœƒè§¸ç™¼çˆ¶å±¤ç›¸é—œçš„å‡½å¼</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// rgb(255, 255, 255)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">randomInt</span> <span class="o">=</span> <span class="p">(</span><span class="nx">min</span><span class="p">,</span> <span class="nx">max</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="nx">max</span> <span class="o">-</span> <span class="nx">min</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nx">min</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">randomColor</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="sb">`rgb(</span><span class="si">${</span><span class="nx">randomInt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span><span class="si">}</span><span class="sb">, </span><span class="si">${</span><span class="nx">randomInt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span><span class="si">}</span><span class="sb">, </span><span class="si">${</span><span class="nx">randomInt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span><span class="si">}</span><span class="sb">)`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.nav__link&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="nx">randomColor</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;link&#39;</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span> <span class="o">===</span> <span class="k">this</span><span class="p">)</span> <span class="c1">// true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.nav__links&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="nx">randomColor</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;container&#39;</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.nav&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="nx">randomColor</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;nav&#39;</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="é˜»æ“‹å†’æ³¡äº‹ä»¶">é˜»æ“‹å†’æ³¡äº‹ä»¶</h3>
<ul>
<li>event.stopPropagation()é˜»æ­¢å†’æ³¡</li>
</ul>
<h2 id="äº‹ä»¶å§”æ´¾è·Ÿé é¢é é¢å°èˆª">äº‹ä»¶å§”æ´¾è·Ÿé é¢é é¢å°èˆª</h2>
<ul>
<li>event listener åŠ åˆ°çˆ¶å±¤å®¹å™¨</li>
<li>æ±ºå®šå“ªå€‹å…ƒç´ æœƒè§¸ç™¼äº‹ä»¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.nav__links&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s1">&#39;nav__link&#39;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="c1">// #section--1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">scrollIntoView</span><span class="p">({</span> <span class="nx">behavior</span><span class="o">:</span> <span class="s1">&#39;smooth&#39;</span> <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="éæ­·-dom">éæ­· DOM</h2>
<ul>
<li>document è·Ÿ element éƒ½èƒ½ä½¿ç”¨çš„æ–¹æ³•ï¼Œå°±ä¸ç‰¹åˆ¥æ¨™ç¤ºï¼Œè‹¥ç‚º node ç‰¹æœ‰çš„æ–¹æ³•æœƒæ¨™ç¤º node</li>
<li>querySelectorAll æœƒå›å‚³æŒ‡å®šçš„é¸æ“‡å™¨åŒ¹é…çš„å…ƒç´ çµ„æˆçš„ NodeListï¼Œä¹Ÿæœƒéæ­·æ·±å±¤çš„ç¯€é»</li>
</ul>
<h3 id="å¾€å­å±¤éæ­·">å¾€å­å±¤éæ­·</h3>
<ul>
<li>node.childNodes() å­ç¯€é»çµ„æˆä¹‹é›†åˆï¼ŒåŒ…å«æ‰€æœ‰é¡å‹ç¯€é»</li>
<li>children() å­å±¤ HTML collectionï¼Œåªæœ‰ element é¡å‹</li>
<li>firstElementChild() ç¬¬ä¸€å€‹å…ƒç´ </li>
<li>lastElementChild() æœ€å¾Œä¸€å€‹å…ƒç´ </li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">h1</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;h1&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">h1</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.highlight&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">h1</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">)</span> <span class="c1">// è¼ƒå°‘ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">h1</span><span class="p">.</span><span class="nx">children</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">h1</span><span class="p">.</span><span class="nx">firstElementChild</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;white&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nx">h1</span><span class="p">.</span><span class="nx">lastElementChild</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;orangered&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å¾€çˆ¶å±¤éæ­·">å¾€çˆ¶å±¤éæ­·</h3>
<ul>
<li>node.parentNode() çˆ¶ç¯€é»</li>
<li>node.parentElement() é€šå¸¸è·Ÿä¸Šæ–¹çµæœä¸€æ¨£ï¼Œæ¯”è¼ƒå¸¸ç”¨é€™å€‹</li>
<li>element.closest(selectors): å›å‚³ç¬¦åˆè‡ªèº«æˆ–ä¸Šå±¤ï¼ˆçˆ¶å­æˆ–ç¥–å­«ï¼‰çš„ç¬¬ä¸€å€‹å…ƒç´ </li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">h1</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;h1&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">h1</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span> <span class="c1">// è¼ƒå°‘ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">h1</span><span class="p">.</span><span class="nx">parentElement</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">h1</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s1">&#39;.header&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">background</span> <span class="o">=</span> <span class="s1">&#39;var(--gradient-secondary)&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å…„å¼Ÿå±¤éæ­·">å…„å¼Ÿå±¤éæ­·</h3>
<ul>
<li>element.previousElementSibling å…ƒç´ ç›¸åŒç´šåˆ¥çš„å‰ä¸€å€‹å…ƒç´ ï¼Œæ²’æœ‰æœƒå›å‚³ null</li>
<li>element.nextElementSibling å…ƒç´ ç›¸åŒç´šåˆ¥çš„å¾Œå€‹å…ƒç´ ï¼Œæ²’æœ‰æœƒå›å‚³ null</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">h1</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;h1&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">h1</span><span class="p">.</span><span class="nx">previousElementSibling</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">h1</span><span class="p">.</span><span class="nx">nextElementSibling</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">[...</span><span class="nx">h1</span><span class="p">.</span><span class="nx">parentElement</span><span class="p">.</span><span class="nx">children</span><span class="p">].</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">el</span> <span class="o">!==</span> <span class="nx">h1</span><span class="p">)</span> <span class="nx">el</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">transform</span> <span class="o">=</span> <span class="s1">&#39;scale(0.5)&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="tab-æ‡‰ç”¨">tab æ‡‰ç”¨</h3>
<ul>
<li>å‡è¨­ tab html çµæ§‹ç‚ºä¸‹æ–¹æ¶æ§‹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="nx">button</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span><span class="mi">01</span><span class="o">&lt;</span><span class="err">/span&gt;some text</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="err">/button&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="err">/div&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// é»æ“Šçš„tab åŠ ä¸Šactive
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">tabs</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.operations_tab&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">tabsContainer</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;operations__tab-container&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">tabsContent</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;operations__content&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">tabsContainer</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ä¸Šæ–¹çµæ§‹ï¼Œclickedå¯«e.target ä¾ç…§é»é¸ä½ç½®å¯èƒ½æœƒåˆ—å°å‡ºspanæˆ–button
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// ç”¨closestå¯ä»¥é¸åˆ°buttonè€Œä¸ç”¨æ“”å¿ƒ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">clicked</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s1">&#39;.operations__tab&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// æ²’æœ‰é»åˆ°å°±è¿”å›
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">clicked</span><span class="p">)</span> <span class="k">return</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// é‚„åŸ å–æ¶ˆæ‰€æœ‰activeæ¨£å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">tabsContent</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">el</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">el</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;operations__tab--active&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// åœ¨è¢«é»é¸çš„å…ƒç´ åŠ ä¸Šactive
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">clicked</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;operations__tab--active&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// æ‹¿æ‰æ‰€æœ‰å…§å®¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">tabsContent</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">el</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">el</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;operations__content--active&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// é¡¯ç¤ºå°æ‡‰å…§å®¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nb">document</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="sb">`.operations__content--</span><span class="si">${</span><span class="nx">clicked</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">tab</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;operations__content--active&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å‚³éåƒæ•¸çµ¦äº‹ä»¶è™•ç†å™¨">å‚³éåƒæ•¸çµ¦äº‹ä»¶è™•ç†å™¨</h2>
<ul>
<li>å¸Œæœ› nav æ²’è¢« hover çš„å…ƒç´ è®Šé€æ˜</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="nx">nav</span> <span class="kr">class</span><span class="o">=</span><span class="s1">&#39;nav&#39;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="nx">img</span>
</span></span><span class="line"><span class="cl">    <span class="nx">src</span><span class="o">=</span><span class="s1">&#39;img/logo.png&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">alt</span><span class="o">=</span><span class="s1">&#39;Bankist logo&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">class</span><span class="o">=</span><span class="s1">&#39;nav__logo&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">id</span><span class="o">=</span><span class="s1">&#39;logo&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">designer</span><span class="o">=</span><span class="s1">&#39;Jonas&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">data</span><span class="o">-</span><span class="nx">version</span><span class="o">-</span><span class="nx">number</span><span class="o">=</span><span class="s1">&#39;3.0&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="o">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="nx">ul</span> <span class="kr">class</span><span class="o">=</span><span class="s1">&#39;nav__links&#39;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="nx">li</span> <span class="kr">class</span><span class="o">=</span><span class="s1">&#39;nav__item&#39;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">a</span> <span class="kr">class</span><span class="o">=</span><span class="s1">&#39;nav__link&#39;</span> <span class="nx">href</span><span class="o">=</span><span class="s1">&#39;#section--1&#39;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">Features</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="err">/a&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">/li&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="nx">li</span> <span class="kr">class</span><span class="o">=</span><span class="s1">&#39;nav__item&#39;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">a</span> <span class="kr">class</span><span class="o">=</span><span class="s1">&#39;nav__link&#39;</span> <span class="nx">href</span><span class="o">=</span><span class="s1">&#39;#section--2&#39;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">Operations</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="err">/a&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">/li&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="nx">li</span> <span class="kr">class</span><span class="o">=</span><span class="s1">&#39;nav__item&#39;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">a</span> <span class="kr">class</span><span class="o">=</span><span class="s1">&#39;nav__link&#39;</span> <span class="nx">href</span><span class="o">=</span><span class="s1">&#39;#section--3&#39;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">Testimonials</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="err">/a&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">/li&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="nx">li</span> <span class="kr">class</span><span class="o">=</span><span class="s1">&#39;nav__item&#39;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="nx">a</span> <span class="kr">class</span><span class="o">=</span><span class="s1">&#39;nav__link nav__link--btn btn--show-modal&#39;</span> <span class="nx">href</span><span class="o">=</span><span class="s1">&#39;#&#39;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">Open</span> <span class="nx">account</span>
</span></span><span class="line"><span class="cl">      <span class="o">&lt;</span><span class="err">/a&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="err">/li&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="err">/ul&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="err">/nav&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>mousein è·Ÿ mouseout å‚³ä¸åŒåƒæ•¸åˆ°ï¼Œmousein é€æ˜åº¦è®Š 0.5ï¼Œmouseout è®Šå› 1</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// you can log the handleHover(0.1) to see that it returns a function which
</span></span></span><span class="line"><span class="cl"><span class="c1">// has access to the argument(opacity value) passed to handleHover() due to closures
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">handleHover</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s1">&#39;nav__link&#39;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">link</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">siblings</span> <span class="o">=</span> <span class="nx">link</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s1">&#39;.nav&#39;</span><span class="p">).</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.nav__link&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">logo</span> <span class="o">=</span> <span class="nx">link</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s1">&#39;.nav&#39;</span><span class="p">).</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="nx">siblings</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">el</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">el</span> <span class="o">!==</span> <span class="nx">link</span><span class="p">)</span> <span class="nx">el</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">opacity</span> <span class="o">=</span> <span class="nx">o</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">      <span class="nx">logo</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">opacity</span> <span class="o">=</span> <span class="nx">o</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">nav</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mouseover&#39;</span><span class="p">,</span> <span class="nx">handleHover</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="nx">nav</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mouseover&#39;</span><span class="p">,</span> <span class="nx">handleHover</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="intersectionobserver">IntersectionObserver()</h2>
<ul>
<li>const observer = new IntersectionObserver(handleIntersect, options);</li>
<li>Intersection Observer API æœƒè¨»å†Šä¸€å€‹ callback functionï¼Œç•¶è¢«ç›£è½çš„å…ƒç´ é€²å…¥/é€€å‡ºå¦ä¸€å€‹å…ƒç´ (æˆ– viewport)ï¼Œæˆ–ç›®æ¨™è·Ÿå…ƒç´ (æˆ– viewport)å…©å€‹å…ƒç´ ç›¸äº¤éƒ¨åˆ†å¤§å°æ”¹è®Šï¼ŒæœƒåŸ·è¡Œ callback functionï¼Œæ¸›å°‘ä¸»è¦çš„åŸ·è¡Œç·’ç›£è½å…ƒç´ çš„ loadingï¼Œçµ¦ç€è¦½å™¨è™•ç†</li>
<li>options è£¡é¢æœ‰ rootï¼ˆnull ä»£è¡¨ viewport)ã€rootMargin(ç§»å‹•åˆ°ç›®æ¨™çš„ç›¸å°ä½ç½®)ã€threshold(è¨­å®šç›®æ¨™é€²å…¥å¯è¦‹ç¯„åœå¤šå°‘ç™¾åˆ†æ¯”å¾Œæœƒè§¸ç™¼ï¼Œ1 è¡¨ç¤ºå…ƒç´ å…¨éƒ¨é€²åˆ° viewport æ‰è§¸ç™¼ï¼Œ0.1 è¡¨ç¤ºäº¤ç–Šç›®æ¨™ 10%æ‰è§¸ç™¼ï¼Œ0 è¡¨ç¤ºä¸€ç¢°åˆ°ç›®æ¨™é¦¬ä¸Šè§¸ç™¼)</li>
<li>å¯ä»¥é€é<code>const [entry] = entries</code>ï¼Œå»èª¿ç”¨ entry.target å…ƒç´ åŸ·è¡Œå°æ‡‰æ“ä½œ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// é è¨­å€¼
</span></span></span><span class="line"><span class="cl"><span class="c1">// root Must be the ancestor of the target. Defaults to the browser viewport
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">root</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">rootMargin</span><span class="o">:</span> <span class="s2">&#34;0px 0px 0px 0px&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">threshold</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å¸¸ç”¨æ–¼ lazy loadingã€ç„¡é™æ»¾å‹•ã€æª¢æ¸¬å»£å‘Šæ›å…‰ã€ä½¿ç”¨è€…çœ‹åˆ°æŸäº›å€åŸŸæ™‚åŸ·è¡Œä»»å‹™æˆ–æ”¾å½±ç‰‡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// å±•ç¤ºentriesåƒæ•¸
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">obsCallback</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">entries</span><span class="p">,</span> <span class="nx">observer</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">  <span class="nx">entries</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">entry</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">entry</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">obsOptions</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">root</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">threshold</span><span class="o">:</span> <span class="mf">0.1</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">observer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">IntersectionObserver</span><span class="p">(</span><span class="nx">obsCallback</span><span class="p">,</span> <span class="nx">obsOptions</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">  <span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">section1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;scroll&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(){</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="sticky-navbar">sticky navbar</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">.</span><span class="nc">sticky</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">position</span><span class="p">:</span> <span class="kc">fixed</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">background-color</span><span class="p">:</span> <span class="kc">white</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">opacity</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">header</span> <span class="o">=</span> <span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.header&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// å‹•æ…‹è¨ˆç®—navé«˜
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">navHeight</span> <span class="o">=</span> <span class="nx">nav</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">().</span><span class="nx">height</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">navHeight</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// function
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">stickToTop</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">entries</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Entries is always an array because the options in IntersectionObserver can have multiple thresholds, and for each threshold, there will be an entry in the array, even if there is only one threshold.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="p">[</span><span class="nx">entry</span><span class="p">]</span> <span class="o">=</span> <span class="nx">entries</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">entry</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">entry</span><span class="p">.</span><span class="nx">isIntersecting</span><span class="p">)</span> <span class="nx">nav</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;sticky&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">else</span> <span class="nx">nav</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;sticky&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">obsOptions</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">root</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">threshold</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æŠŠè¦–çª—ä¸Šå³ä¸‹å·¦éƒ½å…§ç¸®navHeight px è®“ä½ç½®å¡åœ¨è·é›¢æ–°sectioné€²å…¥å‰çš„navHeight
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">rootMargin</span><span class="o">:</span> <span class="sb">`-</span><span class="si">${</span><span class="nx">navHeight</span><span class="si">}</span><span class="sb">px`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">headerObserver</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">IntersectionObserver</span><span class="p">(</span><span class="nx">stickToTop</span><span class="p">,</span> <span class="nx">obsOptions</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">headerObserver</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">header</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ»¾å‹•æ™‚åœ–ç‰‡è·³å‡ºé¡¯ç¤º">æ»¾å‹•æ™‚åœ–ç‰‡è·³å‡ºé¡¯ç¤º</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">.</span><span class="nc">hidden</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">visibility</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">opacity</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">.</span><span class="nc">section--hidden</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">opacity</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">transform</span><span class="p">:</span> <span class="nb">translateY</span><span class="p">(</span><span class="mi">8</span><span class="kt">rem</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// nodelist
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">allSections</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.section&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// callback
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">revealSection</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">entries</span><span class="p">,</span> <span class="nx">observer</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">entry</span><span class="p">]</span> <span class="o">=</span> <span class="nx">entries</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">entry</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">entry</span><span class="p">.</span><span class="nx">isIntersecting</span><span class="p">)</span> <span class="k">return</span>
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;section--hidden&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// for performance
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">observer</span><span class="p">.</span><span class="nx">unobserve</span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">sectionObserver</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">IntersectionObserver</span><span class="p">(</span><span class="nx">revealSection</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">root</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">threshold</span><span class="o">:</span> <span class="mf">0.15</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">allSections</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">section</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ¯å€‹sectionéƒ½åŠ ä¸ŠsectionObserver
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">sectionObserver</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">section</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// åˆå§‹æ™‚å…ˆå…¨éƒ¨éƒ½éš±è—
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">section</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;section--hidden&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="lazy-loading">Lazy Loading</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">imgTargets</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;img[data-src]&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">loadImg</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">entries</span><span class="p">,</span> <span class="nx">observer</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">entry</span><span class="p">]</span> <span class="o">=</span> <span class="nx">entries</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">entry</span><span class="p">.</span><span class="nx">isIntersecting</span><span class="p">)</span> <span class="k">return</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// change photo
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">entry</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">src</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// remove filter
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="nx">entry</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">entry</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;lazy-img&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="nx">ebserver</span><span class="p">.</span><span class="nx">unobserve</span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">imgObserver</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">IntersectionObserver</span><span class="p">(</span><span class="nx">loadImg</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">root</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">threshold</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// è¦–çª—æ“´å¤§ææ—©è§¸ç™¼ä¸‹è¼‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">rootMargin</span><span class="o">:</span> <span class="s1">&#39;200px&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">imgTargets</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">img</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">imgObserver</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">img</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ç‡ˆç®±">ç‡ˆç®±</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">slider</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">slides</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.slide&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">btnLeft</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.slider__btn--left&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">btnRight</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.slider__btn--right&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">dotsContainer</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.dots&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">curSlide</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">maxSlide</span> <span class="o">=</span> <span class="nx">slides</span><span class="p">.</span><span class="nx">length</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">slider</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;slider&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// æ–¹ä¾¿èª¿é©ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// const slider = document.querySelector(&#39;.slider&#39;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// slider.style.tranform = &#39;scale(0.4) translateX(-800px)&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// slider.style.overflow = &#39;visible&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="c1">// function
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">createDots</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">slides</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">dotContainer</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="s1">&#39;beforeend&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="sb">`&lt;button class=&#34;dots__dot&#34; data-slide=&#34;</span><span class="si">${</span><span class="nx">i</span><span class="si">}</span><span class="sb">&#34;&gt;&lt;button&gt;`</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">activateDot</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slide</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.dots+dot&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">dot</span> <span class="p">=&gt;</span> <span class="nx">dot</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;dots__dot--active&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="sb">`.data__dot[data-slide=&#34;</span><span class="si">${</span><span class="nx">slide</span><span class="si">}</span><span class="sb">&#34;]`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;dots_dot--active&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">goToSlide</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">slide</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">slides</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">transform</span> <span class="o">=</span> <span class="sb">`translateX(</span><span class="si">${</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nx">i</span> <span class="o">-</span> <span class="nx">slide</span><span class="p">)</span><span class="si">}</span><span class="sb">%)`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">nextSlide</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">curSlide</span> <span class="o">===</span> <span class="nx">maxSlide</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">curSlide</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">curSlide</span><span class="o">++</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">goToSlide</span><span class="p">(</span><span class="nx">curSlide</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">activateDot</span><span class="p">(</span><span class="nx">curSlide</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">prevSlide</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">curSlide</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">curSlide</span> <span class="o">=</span> <span class="nx">maxSlide</span> <span class="o">-</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">curSlide</span><span class="o">--</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">goToSlide</span><span class="p">(</span><span class="nx">curSlide</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">activateDot</span><span class="p">(</span><span class="nx">curSlide</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">createDots</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="nx">activateDot</span><span class="p">(</span><span class="nx">curSlide</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">goToSlide</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">init</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// curSlide= 0: 0 100% 200% 300%
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// curSlide= 1: -100% 0% 100% 200%
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Event Handlers
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">btnRight</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">nextSlide</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">btnLeft</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">prevSlide</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">dotContainer</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s1">&#39;dots__dot&#39;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="p">{</span> <span class="nx">slide</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">dataset</span>
</span></span><span class="line"><span class="cl">      <span class="nx">goToSlide</span><span class="p">(</span><span class="nx">slide</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">activateDot</span><span class="p">(</span><span class="nx">curSlide</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">slider</span><span class="err">ï¼ˆï¼‰</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="dom-events-ç”Ÿå‘½é€±æœŸ">DOM events ç”Ÿå‘½é€±æœŸ</h2>
<h3 id="domcontentloaded">DOMContentLoaded</h3>
<ul>
<li>HTML è§£æå®Œï¼ŒDOM å»ºæ§‹å®Œæˆå¾Œè§¸ç™¼</li>
<li>ä¸æœƒç­‰å¾… stylesheets, åœ–ç‰‡å’Œ subframes ç­‰å¤–éƒ¨è³‡æºå®Œæˆè®€å–</li>
<li>åœ¨ DOMContentLoaded å‰ï¼Œæ‰€æœ‰ JavaScript è…³æœ¬æ‡‰è©²è¢«ä¸‹è¼‰è·ŸåŸ·è¡Œ</li>
<li>æˆ‘å€‘çš„ JavaScript éƒ½æ”¾åœ¨ body å°¾ç«¯ï¼Œæ‰€ä»¥ä¸ç”¨ç›£è½é€™å€‹äº‹ä»¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;HTML parsed and DOM tree built&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="load">load</h3>
<ul>
<li>ç™¼ç”Ÿåœ¨åŠ è¼‰å®Œç›®æ¨™è³‡æºã€è©²è³‡æºä¾è³´çš„å…¶ä»–è³‡æºæ™‚</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;page fully loaded&#39;</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="beforeunload">beforeunload</h3>
<ul>
<li>ç€è¦½å™¨é—œé–‰æˆ–åˆ·æ–°ï¼Œè§¸ç™¼ä¸€å€‹ dialogï¼Œç•¶å‰é é¢ä¸æœƒç›´æ¥é—œé–‰ï¼Œå¯ä»¥é»ç¢ºå®šæˆ–å–æ¶ˆ</li>
<li>éœ€è¦æ­é… e.preventDefault ä½¿ç”¨</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;beforeunload&#39;</span><span class="p">,</span> <span class="nx">funciton</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">  <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="nx">e</span><span class="p">.</span><span class="nx">returnValue</span><span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ç€è¦½å™¨æ¸²æŸ“ç•«é¢æµç¨‹ï¼šå»ºç«‹ DOM â†’ å»ºç«‹ CSSOM â†’ åˆä½µç‚º Render Tree â†’ Layoutï¼ˆç©ºé–“ä½ç½®æ’ç‰ˆä½ˆå±€ï¼‰ â†’ Paintï¼ˆç¹ªè£½ç•«é¢ï¼Œè½‰æ›æˆåƒç´ åšå‘ˆç¾ï¼‰</li>
<li>ç”±æ–¼ JavaScript åœ¨åŸ·è¡Œæ™‚ï¼Œæœƒåœæ­¢æ¸²æŸ“å‹•ä½œï¼Œé˜»å¡ DOM å’Œ CSSOM çš„å»ºæ§‹éç¨‹</li>
<li>å› æ­¤æœƒå»ºè­°æŠŠ script æ”¾åœ¨ HTML å…§å®¹ä¸‹æ–¹ï¼Œä¹Ÿå°±æ˜¯<code>&lt;/body&gt;</code>å‰ï¼Œç­‰æ–¼ HTML éƒ½è§£æå®Œæˆäº†æ‰æœƒå» fetch è·ŸåŸ·è¡Œ scriptï¼Œä½†å¦‚æœè¦å„ªåŒ–ææ—©åœ¨headå€å¡Šå…ˆä¸‹è¼‰ï¼Œå¯ä»¥è€ƒæ…®deferè·Ÿasyncå±¬æ€§</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  ...
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;./script.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å¦‚æœç‚ºäº†æ•ˆèƒ½æƒ³ææ—©è¼‰å…¥è³‡æºè€Œå¸Œæœ›æŠŠ script æ”¾åœ¨<code>&lt;head&gt;</code>å€å¡Šï¼Œéœ€è¦åŠ ä¸€å€‹<code>defer</code>å±¬æ€§é¿å…é˜»æ“‹æ¸²æŸ“éç¨‹ï¼ˆDOM é‚„åœ¨å»ºç«‹ï¼‰ï¼Œä¿è­‰åŸ·è¡Œé †åºè·Ÿç¨‹å¼ç¢¼ç›¸åŒï¼Œé€šå¸¸æ˜¯æœ€ä½³è§£</li>
<li>è‹¥ä½¿ç”¨<code>async</code>å±¬æ€§ï¼Œä¸‹è¼‰å¾Œæœƒç«‹åˆ»åŸ·è¡Œä½†ä¸ä¿è­‰åŸ·è¡Œé †åºï¼Œä¸”è«‹æ±‚å›ä¾†å¾Œæœƒåœæ­¢è§£æï¼Œé‚„æ˜¯å¯èƒ½é‡åˆ° DOM è·Ÿ CSSOM é‚„åœ¨ç”Ÿæˆï¼Œé¸ä¸åˆ°å…ƒç´ ï¼Œé©åˆç”¨åœ¨ä¸æœƒé‡å°æ“ä½œ DOM çš„ scriptï¼Œæˆ–æ˜¯ç¬¬ä¸‰æ–¹çš„å‡½å¼åº«ï¼ˆe.g. Google Analyticsï¼‰</li>
</ul>
<p><img src="/p/advanced-javascript-dom/defer.png"
	width="782"
	height="378"
	srcset="/p/advanced-javascript-dom/defer_hu6b9f353e418dae82fb0d891b6f551bfd_81224_480x0_resize_box_3.png 480w, /p/advanced-javascript-dom/defer_hu6b9f353e418dae82fb0d891b6f551bfd_81224_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="206"
		data-flex-basis="496px"
	
></p>
<p>ä»¥ä¸Šç‚º<a class="link" href="https://www.udemy.com/course/the-complete-javascript-course/"  title="The Complete JavaScript Course - From Zero to Expert"
     target="_blank" rel="noopener"
    >The Complete JavaScript Course - From Zero to Expert</a>çš„å°ç­†è¨˜ï¼Œé™„ä¸Šé€£çµæ¨æ¨é€™å ‚èª²</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/javascript/">JavaScript</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="bacnotes/comment"
        issue-term="pathname"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2021 - 
        
        2022 bacnoteså‚™ä»½ç­†è¨˜
    </section>
    
    <section class="powerby">
        
            ç›¸ä¿¡ç§‘æŠ€è®“ç¤¾æœƒæ›´ç¾å¥½ï¼Œæ‰€ä»¥é–‹å§‹å¯«èµ·äº†ç¨‹å¼ <br/>
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.10.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®éŒ„</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#node-ç¯€é»">Node ç¯€é»</a>
      <ul>
        <li><a href="#å±¬æ€§">å±¬æ€§</a></li>
        <li><a href="#æ–¹æ³•">æ–¹æ³•</a></li>
        <li><a href="#4-ç¨®é¡å‹">4 ç¨®é¡å‹</a></li>
      </ul>
    </li>
    <li><a href="#å…ƒç´ ">å…ƒç´ </a>
      <ul>
        <li><a href="#é¸å–å…ƒç´ ">é¸å–å…ƒç´ </a></li>
        <li><a href="#å‰µé€ èˆ‡æ’å…¥å…ƒç´ ">å‰µé€ èˆ‡æ’å…¥å…ƒç´ </a></li>
        <li><a href="#åˆªé™¤å…ƒç´ ">åˆªé™¤å…ƒç´ </a></li>
      </ul>
    </li>
    <li><a href="#class-æ¨£å¼">class æ¨£å¼</a>
      <ul>
        <li><a href="#å–å¾—-class-æ¨£å¼">å–å¾— class æ¨£å¼</a></li>
        <li><a href="#æ–°å¢åˆ‡æ›åˆªé™¤ç¢ºèªæ˜¯å¦æœ‰æ¨£å¼">æ–°å¢/åˆ‡æ›/åˆªé™¤/ç¢ºèªæ˜¯å¦æœ‰æ¨£å¼</a></li>
        <li><a href="#è¨­ç½®-css-æ¨£å¼">è¨­ç½® CSS æ¨£å¼</a></li>
      </ul>
    </li>
    <li><a href="#å±¬æ€§-1">å±¬æ€§</a>
      <ul>
        <li><a href="#å–å¾—å±¬æ€§">å–å¾—å±¬æ€§</a></li>
        <li><a href="#æ–°å¢åˆ‡æ›åˆªé™¤ç¢ºèª-å±¬æ€§å›å‚³å±¬æ€§å€¼">æ–°å¢/åˆ‡æ›/åˆªé™¤/ç¢ºèª å±¬æ€§/å›å‚³å±¬æ€§å€¼</a></li>
        <li><a href="#å¢åŠ -data-å±¬æ€§">å¢åŠ  <code>data-*</code>å±¬æ€§</a></li>
      </ul>
    </li>
    <li><a href="#ç•«é¢å…ƒç´ å±¬æ€§">ç•«é¢å…ƒç´ å±¬æ€§</a>
      <ul>
        <li><a href="#å…ƒç´ å¯¬é«˜">å…ƒç´ å¯¬é«˜</a></li>
        <li><a href="#å…ƒç´ ç›¸å°æ–¼è¦–çª—çš„ä½ç½®">å…ƒç´ ç›¸å°æ–¼è¦–çª—çš„ä½ç½®</a></li>
        <li><a href="#è¦–çª—æ°´å¹³å‚ç›´æ»¾å‹•ä½ç½®">è¦–çª—æ°´å¹³/å‚ç›´æ»¾å‹•ä½ç½®</a></li>
        <li><a href="#æ»¾å‹•åˆ°æŒ‡å®šå…ƒç´ -scrollintoview">æ»¾å‹•åˆ°æŒ‡å®šå…ƒç´  scrollIntoView</a></li>
      </ul>
    </li>
    <li><a href="#äº‹ä»¶é¡å‹è·Ÿäº‹ä»¶è™•ç†å™¨">äº‹ä»¶é¡å‹è·Ÿäº‹ä»¶è™•ç†å™¨</a>
      <ul>
        <li><a href="#é˜»æª”é è¨­äº‹ä»¶">é˜»æª”é è¨­äº‹ä»¶</a></li>
        <li><a href="#è¨­ç½®æˆ–ç§»é™¤ç›£è½">è¨­ç½®æˆ–ç§»é™¤ç›£è½</a></li>
      </ul>
    </li>
    <li><a href="#äº‹ä»¶æ•ç²èˆ‡äº‹ä»¶å†’æ³¡">äº‹ä»¶æ•ç²èˆ‡äº‹ä»¶å†’æ³¡</a>
      <ul>
        <li><a href="#é˜»æ“‹å†’æ³¡äº‹ä»¶">é˜»æ“‹å†’æ³¡äº‹ä»¶</a></li>
      </ul>
    </li>
    <li><a href="#äº‹ä»¶å§”æ´¾è·Ÿé é¢é é¢å°èˆª">äº‹ä»¶å§”æ´¾è·Ÿé é¢é é¢å°èˆª</a></li>
    <li><a href="#éæ­·-dom">éæ­· DOM</a>
      <ul>
        <li><a href="#å¾€å­å±¤éæ­·">å¾€å­å±¤éæ­·</a></li>
        <li><a href="#å¾€çˆ¶å±¤éæ­·">å¾€çˆ¶å±¤éæ­·</a></li>
        <li><a href="#å…„å¼Ÿå±¤éæ­·">å…„å¼Ÿå±¤éæ­·</a></li>
        <li><a href="#tab-æ‡‰ç”¨">tab æ‡‰ç”¨</a></li>
      </ul>
    </li>
    <li><a href="#å‚³éåƒæ•¸çµ¦äº‹ä»¶è™•ç†å™¨">å‚³éåƒæ•¸çµ¦äº‹ä»¶è™•ç†å™¨</a></li>
    <li><a href="#intersectionobserver">IntersectionObserver()</a>
      <ul>
        <li><a href="#sticky-navbar">sticky navbar</a></li>
        <li><a href="#æ»¾å‹•æ™‚åœ–ç‰‡è·³å‡ºé¡¯ç¤º">æ»¾å‹•æ™‚åœ–ç‰‡è·³å‡ºé¡¯ç¤º</a></li>
      </ul>
    </li>
    <li><a href="#lazy-loading">Lazy Loading</a></li>
    <li><a href="#ç‡ˆç®±">ç‡ˆç®±</a></li>
    <li><a href="#dom-events-ç”Ÿå‘½é€±æœŸ">DOM events ç”Ÿå‘½é€±æœŸ</a>
      <ul>
        <li><a href="#domcontentloaded">DOMContentLoaded</a></li>
        <li><a href="#load">load</a></li>
        <li><a href="#beforeunload">beforeunload</a></li>
      </ul>
    </li>
  </ul>
</nav>
        </div>
    </section>

            
        
    </aside>


        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
