<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>SSH key on bacnotes備份筆記</title>
        <link>https://bacnotes.github.io/tags/ssh-key/</link>
        <description>Recent content in SSH key on bacnotes備份筆記</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-tw</language>
        <lastBuildDate>Sat, 25 Dec 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://bacnotes.github.io/tags/ssh-key/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>關於SSH key與多組GitHub帳號切換｜bacnotes備份筆記</title>
        <link>https://bacnotes.github.io/p/github-ssh-key/</link>
        <pubDate>Sat, 25 Dec 2021 00:00:00 +0000</pubDate>
        
        <guid>https://bacnotes.github.io/p/github-ssh-key/</guid>
        <description>&lt;img src="https://bacnotes.github.io/p/github-ssh-key/maria-ziegler-jJnZg7vBfMs-unsplash.jpeg" alt="Featured image of post 關於SSH key與多組GitHub帳號切換｜bacnotes備份筆記" /&gt;&lt;p&gt;&lt;img src=&#34;https://bacnotes.github.io/p/github-ssh-key/cat_white.png&#34;
	width=&#34;600&#34;
	height=&#34;760&#34;
	srcset=&#34;https://bacnotes.github.io/p/github-ssh-key/cat_white_hu687556cfe0ac81cfbbc007b8806c4239_412966_480x0_resize_box_3.png 480w, https://bacnotes.github.io/p/github-ssh-key/cat_white_hu687556cfe0ac81cfbbc007b8806c4239_412966_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;white-cat-meme&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;78&#34;
		data-flex-basis=&#34;189px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Um&amp;hellip;在部署前卡到了 Github 多組帳號權限的問題
如果你的電腦只有使用 1 組 GitHub 帳號，可以點下方連結直接到下一篇
&lt;a class=&#34;link&#34; href=&#34;https://bacnotes.github.io/p/github-deploy-hugo&#34;  title=&#34;[只要3秒，使用GitHub一鍵部署你的Hugo部落格&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;只要 3 秒，使用 GitHub 一鍵部署你的 Hugo 部落格&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;為什麼要用一台電腦使用多組-github-帳號&#34;&gt;為什麼要用一台電腦使用多組 GitHub 帳號&lt;/h2&gt;
&lt;p&gt;當遠距工作變成時代趨勢，工作時勢必會有 1 組公司用的 GitHub 帳號(或 GitLab 或…其他的雲端協作平台)，但自己在寫 side project 也會用到 1 組 GitHub 帳號，那麼辦第 2 組 GitHub 帳號就好了吧（就跟 google 帳號一樣？&lt;/p&gt;
&lt;p&gt;但你在 GitHub 的新帳號開了一個 Repo，在編輯器的 terminal 依序輸入下方指令&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git init
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git add .
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git commit -m &amp;#39;some msg&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git branch -M main
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git remote add origin &amp;#39;your repo&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git push -u origin main
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;就會發現在最後一步跳出這個訊息&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ERROR: Permission to userB/repo.git denied to userA
fatal: 無法讀取遠端版本庫。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;要 commit 的時候，被最初註冊的 userA 帳號 deny&lt;/p&gt;
&lt;p&gt;Um&amp;hellip;啊！&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://bacnotes.github.io/p/github-ssh-key/cat.jpg&#34;
	width=&#34;637&#34;
	height=&#34;460&#34;
	srcset=&#34;https://bacnotes.github.io/p/github-ssh-key/cat_hudaaf540c0316f87024b389d3f6684767_48671_480x0_resize_q75_box.jpg 480w, https://bacnotes.github.io/p/github-ssh-key/cat_hudaaf540c0316f87024b389d3f6684767_48671_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;cat-in-universe&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;138&#34;
		data-flex-basis=&#34;332px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;之前的帳號有設定一組對應的 SSH key 讓 GitHub 驗證身份，應該是 SSH key 的問題吧？
有 2 組帳號，生 2 組 key 應該就沒問題了吧！欸不對，我的 terminal 在 git push 的時候，怎麼知道哪組帳號對應哪個 SSH key…&lt;/p&gt;
&lt;p&gt;上網查了一下相關文章，發現可以寫一個 config 來讓不同帳號對應各自的 key&lt;/p&gt;
&lt;h2 id=&#34;管理多組-ssh-key-流程如下&#34;&gt;管理多組 SSH key 流程如下&lt;/h2&gt;
&lt;p&gt;aaa 為範例，可自由代入你的帳號&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;產生 SSH key &lt;code&gt;ssh-keygen -t rsa -C &amp;quot;aaa@example.com&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;決定要儲存的檔名(路徑)
在 Enter file in which to save the key (/Users/XXX/.ssh/id_rsa):
後方填入 &lt;code&gt;/Users/aaa/.ssh/id_rsa_aaa&lt;/code&gt;
*如果沒有新的命名，就會覆蓋原本的 id_rsa&lt;/li&gt;
&lt;li&gt;Enter passphrase(看個人，可以直接 enter 不設定密碼)&lt;/li&gt;
&lt;li&gt;Enter same passphrase again(如果有設定要再輸入一次，沒有就直接 enter)&lt;/li&gt;
&lt;li&gt;把對應的公鑰(id_rsa_aaa.pub 裡面的文字)新增到 GitHub 的 SSH key，&lt;a class=&#34;link&#34; href=&#34;https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;官方圖文教學&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;在.ssh 目錄下，touch 一個 config(不用副檔名)&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Host gh.aaa
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;HostName github.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;User aaa
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;PreferredAuthentications publickey
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;IdentityFile ~/.ssh/id_rsa_aaa
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;把 key 加入管理 &lt;code&gt;ssh-add ~/.ssh/id_rsa_aaa&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;嘗試連線看看對應 host 是否有生效&lt;code&gt;ssh -T git@gh.aaa&lt;/code&gt;
&lt;blockquote&gt;
&lt;p&gt;Hi aaa! You&amp;rsquo;ve successfully authenticated, but GitHub does not provide shell access.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;看到上方訊息表示有成功連線囉！
第 2 個帳號照著上方步驟寫在同個 config 檔案即可&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Host gh.aaa
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;HostName github.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;User aaa
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;PreferredAuthentications publickey
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;IdentityFile ~/.ssh/id_rsa_aaa
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Host gh.bbb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;HostName github.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;User bbb
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;PreferredAuthentications publickey
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;IdentityFile ~/.ssh/id_rsa_bbb
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;注意：經過上面的設定檔後，repo 的位置會從預定的
&lt;a class=&#34;link&#34; href=&#34;mailto:git@github.com&#34; &gt;git@github.com&lt;/a&gt;:ooo/ooo.git 變成 &lt;a class=&#34;link&#34; href=&#34;mailto:git@gh.aaa&#34; &gt;git@gh.aaa&lt;/a&gt;:ooo/ooo.git
後續在新增 repo 連結時需注意，不然可能吃不到 config 設定檔唷&lt;/p&gt;
&lt;p&gt;參考文章:
&lt;a class=&#34;link&#34; href=&#34;https://dotblogs.com.tw/as15774/2018/04/30/174737&#34;  title=&#34;[[Git] 多個SSH Key與帳號的設定(Mac)&#34;
     target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;[Git] 多個 SSH Key 與帳號的設定(Mac)&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
